{"ast":null,"code":"\"use strict\";\n\nvar _excluded = [\"modules\"];\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) {\n    return typeof obj;\n  } : function (obj) {\n    return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n  }, _typeof(obj);\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor);\n  }\n}\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  Object.defineProperty(Constructor, \"prototype\", {\n    writable: false\n  });\n  return Constructor;\n}\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return _typeof(key) === \"symbol\" ? key : String(key);\n}\nfunction _toPrimitive(input, hint) {\n  if (_typeof(input) !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (_typeof(res) !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\nvar DocUtils = require(\"./doc-utils.js\");\nDocUtils.traits = require(\"./traits.js\");\nDocUtils.moduleWrapper = require(\"./module-wrapper.js\");\nvar createScope = require(\"./scope-manager.js\");\nvar _require = require(\"./errors.js\"),\n  throwMultiError = _require.throwMultiError,\n  throwResolveBeforeCompile = _require.throwResolveBeforeCompile,\n  throwRenderInvalidTemplate = _require.throwRenderInvalidTemplate,\n  throwRenderTwice = _require.throwRenderTwice;\nvar logErrors = require(\"./error-logger.js\");\nvar collectContentTypes = require(\"./collect-content-types.js\");\nvar ctXML = \"[Content_Types].xml\";\nvar relsFile = \"_rels/.rels\";\nvar commonModule = require(\"./modules/common.js\");\nvar Lexer = require(\"./lexer.js\");\nvar defaults = DocUtils.defaults,\n  str2xml = DocUtils.str2xml,\n  xml2str = DocUtils.xml2str,\n  moduleWrapper = DocUtils.moduleWrapper,\n  concatArrays = DocUtils.concatArrays,\n  uniq = DocUtils.uniq,\n  stableSort = DocUtils.stableSort;\nvar _require2 = require(\"./errors.js\"),\n  XTInternalError = _require2.XTInternalError,\n  throwFileTypeNotIdentified = _require2.throwFileTypeNotIdentified,\n  throwFileTypeNotHandled = _require2.throwFileTypeNotHandled,\n  throwApiVersionError = _require2.throwApiVersionError;\nvar currentModuleApiVersion = [3, 35, 0];\nvar Docxtemplater = /*#__PURE__*/function () {\n  function Docxtemplater(zip) {\n    var _this = this;\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$modules = _ref.modules,\n      modules = _ref$modules === void 0 ? [] : _ref$modules,\n      options = _objectWithoutProperties(_ref, _excluded);\n    _classCallCheck(this, Docxtemplater);\n    if (!Array.isArray(modules)) {\n      throw new Error(\"The modules argument of docxtemplater's constructor must be an array\");\n    }\n    this.targets = [];\n    this.rendered = false;\n    this.scopeManagers = {};\n    this.compiled = {};\n    this.modules = [commonModule()];\n    this.setOptions(options);\n    modules.forEach(function (module) {\n      _this.attachModule(module);\n    });\n    if (arguments.length > 0) {\n      if (!zip || !zip.files || typeof zip.file !== \"function\") {\n        throw new Error(\"The first argument of docxtemplater's constructor must be a valid zip file (jszip v2 or pizzip v3)\");\n      }\n      this.loadZip(zip);\n      // remove the unsupported modules\n      this.modules = this.modules.filter(function (module) {\n        if (module.supportedFileTypes) {\n          if (!Array.isArray(module.supportedFileTypes)) {\n            throw new Error(\"The supportedFileTypes field of the module must be an array\");\n          }\n          var isSupportedModule = module.supportedFileTypes.indexOf(_this.fileType) !== -1;\n          if (!isSupportedModule) {\n            module.on(\"detached\");\n          }\n          return isSupportedModule;\n        }\n        return true;\n      });\n      this.compile();\n      this.v4Constructor = true;\n    }\n  }\n  _createClass(Docxtemplater, [{\n    key: \"verifyApiVersion\",\n    value: function verifyApiVersion(neededVersion) {\n      neededVersion = neededVersion.split(\".\").map(function (i) {\n        return parseInt(i, 10);\n      });\n      if (neededVersion.length !== 3) {\n        throwApiVersionError(\"neededVersion is not a valid version\", {\n          neededVersion: neededVersion,\n          explanation: \"the neededVersion must be an array of length 3\"\n        });\n      }\n      if (neededVersion[0] !== currentModuleApiVersion[0]) {\n        throwApiVersionError(\"The major api version do not match, you probably have to update docxtemplater with npm install --save docxtemplater\", {\n          neededVersion: neededVersion,\n          currentModuleApiVersion: currentModuleApiVersion,\n          explanation: \"moduleAPIVersionMismatch : needed=\".concat(neededVersion.join(\".\"), \", current=\").concat(currentModuleApiVersion.join(\".\"))\n        });\n      }\n      if (neededVersion[1] > currentModuleApiVersion[1]) {\n        throwApiVersionError(\"The minor api version is not uptodate, you probably have to update docxtemplater with npm install --save docxtemplater\", {\n          neededVersion: neededVersion,\n          currentModuleApiVersion: currentModuleApiVersion,\n          explanation: \"moduleAPIVersionMismatch : needed=\".concat(neededVersion.join(\".\"), \", current=\").concat(currentModuleApiVersion.join(\".\"))\n        });\n      }\n      if (neededVersion[1] === currentModuleApiVersion[1] && neededVersion[2] > currentModuleApiVersion[2]) {\n        throwApiVersionError(\"The patch api version is not uptodate, you probably have to update docxtemplater with npm install --save docxtemplater\", {\n          neededVersion: neededVersion,\n          currentModuleApiVersion: currentModuleApiVersion,\n          explanation: \"moduleAPIVersionMismatch : needed=\".concat(neededVersion.join(\".\"), \", current=\").concat(currentModuleApiVersion.join(\".\"))\n        });\n      }\n      return true;\n    }\n  }, {\n    key: \"setModules\",\n    value: function setModules(obj) {\n      this.modules.forEach(function (module) {\n        module.set(obj);\n      });\n    }\n  }, {\n    key: \"sendEvent\",\n    value: function sendEvent(eventName) {\n      this.modules.forEach(function (module) {\n        module.on(eventName);\n      });\n    }\n  }, {\n    key: \"attachModule\",\n    value: function attachModule(module) {\n      if (this.v4Constructor) {\n        throw new XTInternalError(\"attachModule() should not be called manually when using the v4 constructor\");\n      }\n      var moduleType = _typeof(module);\n      if (moduleType === \"function\") {\n        throw new XTInternalError(\"Cannot attach a class/function as a module. Most probably you forgot to instantiate the module by using `new` on the module.\");\n      }\n      if (!module || moduleType !== \"object\") {\n        throw new XTInternalError(\"Cannot attachModule with a falsy value\");\n      }\n      if (module.requiredAPIVersion) {\n        this.verifyApiVersion(module.requiredAPIVersion);\n      }\n      if (module.attached === true) {\n        if (typeof module.clone === \"function\") {\n          module = module.clone();\n        } else {\n          throw new Error(\"Cannot attach a module that was already attached : \\\"\".concat(module.name, \"\\\". The most likely cause is that you are instantiating the module at the root level, and using it for multiple instances of Docxtemplater\"));\n        }\n      }\n      module.attached = true;\n      var wrappedModule = moduleWrapper(module);\n      this.modules.push(wrappedModule);\n      wrappedModule.on(\"attached\");\n      return this;\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      var _this2 = this;\n      if (this.v4Constructor) {\n        throw new Error(\"setOptions() should not be called manually when using the v4 constructor\");\n      }\n      if (!options) {\n        throw new Error(\"setOptions should be called with an object as first parameter\");\n      }\n      this.options = {};\n      Object.keys(defaults).forEach(function (key) {\n        var defaultValue = defaults[key];\n        _this2.options[key] = options[key] != null ? options[key] : defaultValue;\n        _this2[key] = _this2.options[key];\n      });\n      this.delimiters.start = DocUtils.utf8ToWord(this.delimiters.start);\n      this.delimiters.end = DocUtils.utf8ToWord(this.delimiters.end);\n      if (this.zip) {\n        this.updateFileTypeConfig();\n      }\n      return this;\n    }\n  }, {\n    key: \"loadZip\",\n    value: function loadZip(zip) {\n      if (this.v4Constructor) {\n        throw new Error(\"loadZip() should not be called manually when using the v4 constructor\");\n      }\n      if (zip.loadAsync) {\n        throw new XTInternalError(\"Docxtemplater doesn't handle JSZip version >=3, please use pizzip\");\n      }\n      this.zip = zip;\n      this.updateFileTypeConfig();\n      this.modules = concatArrays([this.fileTypeConfig.baseModules.map(function (moduleFunction) {\n        return moduleFunction();\n      }), this.modules]);\n      return this;\n    }\n  }, {\n    key: \"precompileFile\",\n    value: function precompileFile(fileName) {\n      var currentFile = this.createTemplateClass(fileName);\n      currentFile.preparse();\n      this.compiled[fileName] = currentFile;\n    }\n  }, {\n    key: \"compileFile\",\n    value: function compileFile(fileName) {\n      this.compiled[fileName].parse();\n    }\n  }, {\n    key: \"getScopeManager\",\n    value: function getScopeManager(to, currentFile, tags) {\n      if (!this.scopeManagers[to]) {\n        this.scopeManagers[to] = createScope({\n          tags: tags || {},\n          parser: this.parser,\n          cachedParsers: currentFile.cachedParsers\n        });\n      }\n      return this.scopeManagers[to];\n    }\n  }, {\n    key: \"resolveData\",\n    value: function resolveData(data) {\n      var _this3 = this;\n      var errors = [];\n      if (!Object.keys(this.compiled).length) {\n        throwResolveBeforeCompile();\n      }\n      return Promise.resolve(data).then(function (data) {\n        _this3.setData(data);\n        _this3.setModules({\n          data: _this3.data,\n          Lexer: Lexer\n        });\n        _this3.mapper = _this3.modules.reduce(function (value, module) {\n          return module.getRenderedMap(value);\n        }, {});\n        return Promise.all(Object.keys(_this3.mapper).map(function (to) {\n          var _this3$mapper$to = _this3.mapper[to],\n            from = _this3$mapper$to.from,\n            data = _this3$mapper$to.data;\n          return Promise.resolve(data).then(function (data) {\n            var currentFile = _this3.compiled[from];\n            currentFile.filePath = to;\n            currentFile.scopeManager = _this3.getScopeManager(to, currentFile, data);\n            return currentFile.resolveTags(data).then(function (result) {\n              currentFile.scopeManager.finishedResolving = true;\n              return result;\n            }, function (errs) {\n              Array.prototype.push.apply(errors, errs);\n            });\n          });\n        })).then(function (resolved) {\n          if (errors.length !== 0) {\n            if (_this3.options.errorLogging) {\n              logErrors(errors, _this3.options.errorLogging);\n            }\n            throwMultiError(errors);\n          }\n          return concatArrays(resolved);\n        });\n      });\n    }\n  }, {\n    key: \"reorderModules\",\n    value: function reorderModules() {\n      this.modules = stableSort(this.modules, function (m1, m2) {\n        return (m2.priority || 0) - (m1.priority || 0);\n      });\n    }\n  }, {\n    key: \"compile\",\n    value: function compile() {\n      var _this4 = this;\n      this.reorderModules();\n      if (Object.keys(this.compiled).length) {\n        return this;\n      }\n      this.options = this.modules.reduce(function (options, module) {\n        return module.optionsTransformer(options, _this4);\n      }, this.options);\n      this.options.xmlFileNames = uniq(this.options.xmlFileNames);\n      this.xmlDocuments = this.options.xmlFileNames.reduce(function (xmlDocuments, fileName) {\n        var content = _this4.zip.files[fileName].asText();\n        xmlDocuments[fileName] = str2xml(content);\n        return xmlDocuments;\n      }, {});\n      this.setModules({\n        zip: this.zip,\n        xmlDocuments: this.xmlDocuments\n      });\n      this.getTemplatedFiles();\n      // Loop inside all templatedFiles (ie xml files with content).\n      // Sometimes they don't exist (footer.xml for example)\n      this.templatedFiles.forEach(function (fileName) {\n        if (_this4.zip.files[fileName] != null) {\n          _this4.precompileFile(fileName);\n        }\n      });\n      this.templatedFiles.forEach(function (fileName) {\n        if (_this4.zip.files[fileName] != null) {\n          _this4.compileFile(fileName);\n        }\n      });\n      this.setModules({\n        compiled: this.compiled\n      });\n      verifyErrors(this);\n      return this;\n    }\n  }, {\n    key: \"getRelsTypes\",\n    value: function getRelsTypes() {\n      var rootRels = this.zip.files[relsFile];\n      var rootRelsXml = rootRels ? str2xml(rootRels.asText()) : null;\n      var rootRelationships = rootRelsXml ? rootRelsXml.getElementsByTagName(\"Relationship\") : [];\n      var relsTypes = {};\n      for (var i = 0, len = rootRelationships.length; i < len; i++) {\n        var r = rootRelationships[i];\n        relsTypes[r.getAttribute(\"Target\")] = r.getAttribute(\"Type\");\n      }\n      return relsTypes;\n    }\n  }, {\n    key: \"getContentTypes\",\n    value: function getContentTypes() {\n      var contentTypes = this.zip.files[ctXML];\n      var contentTypeXml = contentTypes ? str2xml(contentTypes.asText()) : null;\n      var overrides = contentTypeXml ? contentTypeXml.getElementsByTagName(\"Override\") : null;\n      var defaults = contentTypeXml ? contentTypeXml.getElementsByTagName(\"Default\") : null;\n      return {\n        overrides: overrides,\n        defaults: defaults,\n        contentTypes: contentTypes,\n        contentTypeXml: contentTypeXml\n      };\n    }\n  }, {\n    key: \"updateFileTypeConfig\",\n    value: function updateFileTypeConfig() {\n      var _this5 = this;\n      var fileType;\n      if (this.zip.files.mimetype) {\n        fileType = \"odt\";\n      }\n      this.relsTypes = this.getRelsTypes();\n      var _this$getContentTypes = this.getContentTypes(),\n        overrides = _this$getContentTypes.overrides,\n        defaults = _this$getContentTypes.defaults,\n        contentTypes = _this$getContentTypes.contentTypes,\n        contentTypeXml = _this$getContentTypes.contentTypeXml;\n      if (contentTypeXml) {\n        this.filesContentTypes = collectContentTypes(overrides, defaults, this.zip);\n        this.invertedContentTypes = DocUtils.invertMap(this.filesContentTypes);\n        this.setModules({\n          contentTypes: this.contentTypes,\n          invertedContentTypes: this.invertedContentTypes\n        });\n      }\n      this.modules.forEach(function (module) {\n        fileType = module.getFileType({\n          zip: _this5.zip,\n          contentTypes: contentTypes,\n          contentTypeXml: contentTypeXml,\n          overrides: overrides,\n          defaults: defaults,\n          doc: _this5\n        }) || fileType;\n      });\n      if (fileType === \"odt\") {\n        throwFileTypeNotHandled(fileType);\n      }\n      if (!fileType) {\n        throwFileTypeNotIdentified();\n      }\n      this.fileType = fileType;\n      this.fileTypeConfig = this.options.fileTypeConfig || this.fileTypeConfig || Docxtemplater.FileTypeConfig[this.fileType]();\n      return this;\n    }\n  }, {\n    key: \"renderAsync\",\n    value: function renderAsync(data) {\n      var _this6 = this;\n      return this.resolveData(data).then(function () {\n        return _this6.render();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render(data) {\n      var _this7 = this;\n      if (this.rendered) {\n        throwRenderTwice();\n      }\n      this.rendered = true;\n      this.compile();\n      if (this.errors.length > 0) {\n        throwRenderInvalidTemplate();\n      }\n      if (data) {\n        this.setData(data);\n      }\n      this.setModules({\n        data: this.data,\n        Lexer: Lexer\n      });\n      this.mapper = this.mapper || this.modules.reduce(function (value, module) {\n        return module.getRenderedMap(value);\n      }, {});\n      Object.keys(this.mapper).forEach(function (to) {\n        var _this7$mapper$to = _this7.mapper[to],\n          from = _this7$mapper$to.from,\n          data = _this7$mapper$to.data;\n        var currentFile = _this7.compiled[from];\n        currentFile.scopeManager = _this7.getScopeManager(to, currentFile, data);\n        currentFile.render(to);\n        _this7.zip.file(to, currentFile.content, {\n          createFolders: true\n        });\n      });\n      verifyErrors(this);\n      this.sendEvent(\"syncing-zip\");\n      this.syncZip();\n      return this;\n    }\n  }, {\n    key: \"syncZip\",\n    value: function syncZip() {\n      var _this8 = this;\n      Object.keys(this.xmlDocuments).forEach(function (fileName) {\n        _this8.zip.remove(fileName);\n        var content = xml2str(_this8.xmlDocuments[fileName]);\n        return _this8.zip.file(fileName, content, {\n          createFolders: true\n        });\n      });\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      this.data = data;\n      return this;\n    }\n  }, {\n    key: \"getZip\",\n    value: function getZip() {\n      return this.zip;\n    }\n  }, {\n    key: \"createTemplateClass\",\n    value: function createTemplateClass(path) {\n      var content = this.zip.files[path].asText();\n      return this.createTemplateClassFromContent(content, path);\n    }\n  }, {\n    key: \"createTemplateClassFromContent\",\n    value: function createTemplateClassFromContent(content, filePath) {\n      var _this9 = this;\n      var xmltOptions = {\n        filePath: filePath,\n        contentType: this.filesContentTypes[filePath],\n        relsType: this.relsTypes[filePath]\n      };\n      Object.keys(defaults).concat([\"filesContentTypes\", \"fileTypeConfig\", \"fileType\", \"modules\"]).forEach(function (key) {\n        xmltOptions[key] = _this9[key];\n      });\n      return new Docxtemplater.XmlTemplater(content, xmltOptions);\n    }\n  }, {\n    key: \"getFullText\",\n    value: function getFullText(path) {\n      return this.createTemplateClass(path || this.fileTypeConfig.textPath(this)).getFullText();\n    }\n  }, {\n    key: \"getTemplatedFiles\",\n    value: function getTemplatedFiles() {\n      var _this10 = this;\n      this.templatedFiles = this.fileTypeConfig.getTemplatedFiles(this.zip);\n      this.targets.forEach(function (target) {\n        _this10.templatedFiles.push(target);\n      });\n      this.templatedFiles = uniq(this.templatedFiles);\n      return this.templatedFiles;\n    }\n  }]);\n  return Docxtemplater;\n}();\nfunction verifyErrors(doc) {\n  var compiled = doc.compiled;\n  doc.errors = concatArrays(Object.keys(compiled).map(function (name) {\n    return compiled[name].allErrors;\n  }));\n  if (doc.errors.length !== 0) {\n    if (doc.options.errorLogging) {\n      logErrors(doc.errors, doc.options.errorLogging);\n    }\n    throwMultiError(doc.errors);\n  }\n}\nDocxtemplater.DocUtils = DocUtils;\nDocxtemplater.Errors = require(\"./errors.js\");\nDocxtemplater.XmlTemplater = require(\"./xml-templater.js\");\nDocxtemplater.FileTypeConfig = require(\"./file-type-config.js\");\nDocxtemplater.XmlMatcher = require(\"./xml-matcher.js\");\nmodule.exports = Docxtemplater;","map":{"version":3,"names":["_excluded","_typeof","obj","Symbol","iterator","constructor","prototype","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","Object","getOwnPropertySymbols","sourceSymbolKeys","length","indexOf","propertyIsEnumerable","call","sourceKeys","keys","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","_toPropertyKey","_createClass","protoProps","staticProps","arg","_toPrimitive","String","input","hint","prim","toPrimitive","undefined","res","Number","DocUtils","require","traits","moduleWrapper","createScope","_require","throwMultiError","throwResolveBeforeCompile","throwRenderInvalidTemplate","throwRenderTwice","logErrors","collectContentTypes","ctXML","relsFile","commonModule","Lexer","defaults","str2xml","xml2str","concatArrays","uniq","stableSort","_require2","XTInternalError","throwFileTypeNotIdentified","throwFileTypeNotHandled","throwApiVersionError","currentModuleApiVersion","Docxtemplater","zip","_this","_ref","arguments","_ref$modules","modules","options","Array","isArray","Error","targets","rendered","scopeManagers","compiled","setOptions","forEach","module","attachModule","files","file","loadZip","filter","supportedFileTypes","isSupportedModule","fileType","on","compile","v4Constructor","value","verifyApiVersion","neededVersion","split","map","parseInt","explanation","concat","join","setModules","set","sendEvent","eventName","moduleType","requiredAPIVersion","attached","clone","name","wrappedModule","push","_this2","defaultValue","delimiters","start","utf8ToWord","end","updateFileTypeConfig","loadAsync","fileTypeConfig","baseModules","moduleFunction","precompileFile","fileName","currentFile","createTemplateClass","preparse","compileFile","parse","getScopeManager","to","tags","parser","cachedParsers","resolveData","data","_this3","errors","Promise","resolve","then","setData","mapper","reduce","getRenderedMap","all","_this3$mapper$to","from","filePath","scopeManager","resolveTags","result","finishedResolving","errs","apply","resolved","errorLogging","reorderModules","m1","m2","priority","_this4","optionsTransformer","xmlFileNames","xmlDocuments","content","asText","getTemplatedFiles","templatedFiles","verifyErrors","getRelsTypes","rootRels","rootRelsXml","rootRelationships","getElementsByTagName","relsTypes","len","r","getAttribute","getContentTypes","contentTypes","contentTypeXml","overrides","_this5","mimetype","_this$getContentTypes","filesContentTypes","invertedContentTypes","invertMap","getFileType","doc","FileTypeConfig","renderAsync","_this6","render","_this7","_this7$mapper$to","createFolders","syncZip","_this8","remove","getZip","path","createTemplateClassFromContent","_this9","xmltOptions","contentType","relsType","XmlTemplater","getFullText","textPath","_this10","allErrors","Errors","XmlMatcher","exports"],"sources":["C:/Users/malvi/Angular/template/node_modules/docxtemplater/js/docxtemplater.js"],"sourcesContent":["\"use strict\";\n\nvar _excluded = [\"modules\"];\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nvar DocUtils = require(\"./doc-utils.js\");\nDocUtils.traits = require(\"./traits.js\");\nDocUtils.moduleWrapper = require(\"./module-wrapper.js\");\nvar createScope = require(\"./scope-manager.js\");\nvar _require = require(\"./errors.js\"),\n  throwMultiError = _require.throwMultiError,\n  throwResolveBeforeCompile = _require.throwResolveBeforeCompile,\n  throwRenderInvalidTemplate = _require.throwRenderInvalidTemplate,\n  throwRenderTwice = _require.throwRenderTwice;\nvar logErrors = require(\"./error-logger.js\");\nvar collectContentTypes = require(\"./collect-content-types.js\");\nvar ctXML = \"[Content_Types].xml\";\nvar relsFile = \"_rels/.rels\";\nvar commonModule = require(\"./modules/common.js\");\nvar Lexer = require(\"./lexer.js\");\nvar defaults = DocUtils.defaults,\n  str2xml = DocUtils.str2xml,\n  xml2str = DocUtils.xml2str,\n  moduleWrapper = DocUtils.moduleWrapper,\n  concatArrays = DocUtils.concatArrays,\n  uniq = DocUtils.uniq,\n  stableSort = DocUtils.stableSort;\nvar _require2 = require(\"./errors.js\"),\n  XTInternalError = _require2.XTInternalError,\n  throwFileTypeNotIdentified = _require2.throwFileTypeNotIdentified,\n  throwFileTypeNotHandled = _require2.throwFileTypeNotHandled,\n  throwApiVersionError = _require2.throwApiVersionError;\nvar currentModuleApiVersion = [3, 35, 0];\nvar Docxtemplater = /*#__PURE__*/function () {\n  function Docxtemplater(zip) {\n    var _this = this;\n    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref$modules = _ref.modules,\n      modules = _ref$modules === void 0 ? [] : _ref$modules,\n      options = _objectWithoutProperties(_ref, _excluded);\n    _classCallCheck(this, Docxtemplater);\n    if (!Array.isArray(modules)) {\n      throw new Error(\"The modules argument of docxtemplater's constructor must be an array\");\n    }\n    this.targets = [];\n    this.rendered = false;\n    this.scopeManagers = {};\n    this.compiled = {};\n    this.modules = [commonModule()];\n    this.setOptions(options);\n    modules.forEach(function (module) {\n      _this.attachModule(module);\n    });\n    if (arguments.length > 0) {\n      if (!zip || !zip.files || typeof zip.file !== \"function\") {\n        throw new Error(\"The first argument of docxtemplater's constructor must be a valid zip file (jszip v2 or pizzip v3)\");\n      }\n      this.loadZip(zip);\n      // remove the unsupported modules\n      this.modules = this.modules.filter(function (module) {\n        if (module.supportedFileTypes) {\n          if (!Array.isArray(module.supportedFileTypes)) {\n            throw new Error(\"The supportedFileTypes field of the module must be an array\");\n          }\n          var isSupportedModule = module.supportedFileTypes.indexOf(_this.fileType) !== -1;\n          if (!isSupportedModule) {\n            module.on(\"detached\");\n          }\n          return isSupportedModule;\n        }\n        return true;\n      });\n      this.compile();\n      this.v4Constructor = true;\n    }\n  }\n  _createClass(Docxtemplater, [{\n    key: \"verifyApiVersion\",\n    value: function verifyApiVersion(neededVersion) {\n      neededVersion = neededVersion.split(\".\").map(function (i) {\n        return parseInt(i, 10);\n      });\n      if (neededVersion.length !== 3) {\n        throwApiVersionError(\"neededVersion is not a valid version\", {\n          neededVersion: neededVersion,\n          explanation: \"the neededVersion must be an array of length 3\"\n        });\n      }\n      if (neededVersion[0] !== currentModuleApiVersion[0]) {\n        throwApiVersionError(\"The major api version do not match, you probably have to update docxtemplater with npm install --save docxtemplater\", {\n          neededVersion: neededVersion,\n          currentModuleApiVersion: currentModuleApiVersion,\n          explanation: \"moduleAPIVersionMismatch : needed=\".concat(neededVersion.join(\".\"), \", current=\").concat(currentModuleApiVersion.join(\".\"))\n        });\n      }\n      if (neededVersion[1] > currentModuleApiVersion[1]) {\n        throwApiVersionError(\"The minor api version is not uptodate, you probably have to update docxtemplater with npm install --save docxtemplater\", {\n          neededVersion: neededVersion,\n          currentModuleApiVersion: currentModuleApiVersion,\n          explanation: \"moduleAPIVersionMismatch : needed=\".concat(neededVersion.join(\".\"), \", current=\").concat(currentModuleApiVersion.join(\".\"))\n        });\n      }\n      if (neededVersion[1] === currentModuleApiVersion[1] && neededVersion[2] > currentModuleApiVersion[2]) {\n        throwApiVersionError(\"The patch api version is not uptodate, you probably have to update docxtemplater with npm install --save docxtemplater\", {\n          neededVersion: neededVersion,\n          currentModuleApiVersion: currentModuleApiVersion,\n          explanation: \"moduleAPIVersionMismatch : needed=\".concat(neededVersion.join(\".\"), \", current=\").concat(currentModuleApiVersion.join(\".\"))\n        });\n      }\n      return true;\n    }\n  }, {\n    key: \"setModules\",\n    value: function setModules(obj) {\n      this.modules.forEach(function (module) {\n        module.set(obj);\n      });\n    }\n  }, {\n    key: \"sendEvent\",\n    value: function sendEvent(eventName) {\n      this.modules.forEach(function (module) {\n        module.on(eventName);\n      });\n    }\n  }, {\n    key: \"attachModule\",\n    value: function attachModule(module) {\n      if (this.v4Constructor) {\n        throw new XTInternalError(\"attachModule() should not be called manually when using the v4 constructor\");\n      }\n      var moduleType = _typeof(module);\n      if (moduleType === \"function\") {\n        throw new XTInternalError(\"Cannot attach a class/function as a module. Most probably you forgot to instantiate the module by using `new` on the module.\");\n      }\n      if (!module || moduleType !== \"object\") {\n        throw new XTInternalError(\"Cannot attachModule with a falsy value\");\n      }\n      if (module.requiredAPIVersion) {\n        this.verifyApiVersion(module.requiredAPIVersion);\n      }\n      if (module.attached === true) {\n        if (typeof module.clone === \"function\") {\n          module = module.clone();\n        } else {\n          throw new Error(\"Cannot attach a module that was already attached : \\\"\".concat(module.name, \"\\\". The most likely cause is that you are instantiating the module at the root level, and using it for multiple instances of Docxtemplater\"));\n        }\n      }\n      module.attached = true;\n      var wrappedModule = moduleWrapper(module);\n      this.modules.push(wrappedModule);\n      wrappedModule.on(\"attached\");\n      return this;\n    }\n  }, {\n    key: \"setOptions\",\n    value: function setOptions(options) {\n      var _this2 = this;\n      if (this.v4Constructor) {\n        throw new Error(\"setOptions() should not be called manually when using the v4 constructor\");\n      }\n      if (!options) {\n        throw new Error(\"setOptions should be called with an object as first parameter\");\n      }\n      this.options = {};\n      Object.keys(defaults).forEach(function (key) {\n        var defaultValue = defaults[key];\n        _this2.options[key] = options[key] != null ? options[key] : defaultValue;\n        _this2[key] = _this2.options[key];\n      });\n      this.delimiters.start = DocUtils.utf8ToWord(this.delimiters.start);\n      this.delimiters.end = DocUtils.utf8ToWord(this.delimiters.end);\n      if (this.zip) {\n        this.updateFileTypeConfig();\n      }\n      return this;\n    }\n  }, {\n    key: \"loadZip\",\n    value: function loadZip(zip) {\n      if (this.v4Constructor) {\n        throw new Error(\"loadZip() should not be called manually when using the v4 constructor\");\n      }\n      if (zip.loadAsync) {\n        throw new XTInternalError(\"Docxtemplater doesn't handle JSZip version >=3, please use pizzip\");\n      }\n      this.zip = zip;\n      this.updateFileTypeConfig();\n      this.modules = concatArrays([this.fileTypeConfig.baseModules.map(function (moduleFunction) {\n        return moduleFunction();\n      }), this.modules]);\n      return this;\n    }\n  }, {\n    key: \"precompileFile\",\n    value: function precompileFile(fileName) {\n      var currentFile = this.createTemplateClass(fileName);\n      currentFile.preparse();\n      this.compiled[fileName] = currentFile;\n    }\n  }, {\n    key: \"compileFile\",\n    value: function compileFile(fileName) {\n      this.compiled[fileName].parse();\n    }\n  }, {\n    key: \"getScopeManager\",\n    value: function getScopeManager(to, currentFile, tags) {\n      if (!this.scopeManagers[to]) {\n        this.scopeManagers[to] = createScope({\n          tags: tags || {},\n          parser: this.parser,\n          cachedParsers: currentFile.cachedParsers\n        });\n      }\n      return this.scopeManagers[to];\n    }\n  }, {\n    key: \"resolveData\",\n    value: function resolveData(data) {\n      var _this3 = this;\n      var errors = [];\n      if (!Object.keys(this.compiled).length) {\n        throwResolveBeforeCompile();\n      }\n      return Promise.resolve(data).then(function (data) {\n        _this3.setData(data);\n        _this3.setModules({\n          data: _this3.data,\n          Lexer: Lexer\n        });\n        _this3.mapper = _this3.modules.reduce(function (value, module) {\n          return module.getRenderedMap(value);\n        }, {});\n        return Promise.all(Object.keys(_this3.mapper).map(function (to) {\n          var _this3$mapper$to = _this3.mapper[to],\n            from = _this3$mapper$to.from,\n            data = _this3$mapper$to.data;\n          return Promise.resolve(data).then(function (data) {\n            var currentFile = _this3.compiled[from];\n            currentFile.filePath = to;\n            currentFile.scopeManager = _this3.getScopeManager(to, currentFile, data);\n            return currentFile.resolveTags(data).then(function (result) {\n              currentFile.scopeManager.finishedResolving = true;\n              return result;\n            }, function (errs) {\n              Array.prototype.push.apply(errors, errs);\n            });\n          });\n        })).then(function (resolved) {\n          if (errors.length !== 0) {\n            if (_this3.options.errorLogging) {\n              logErrors(errors, _this3.options.errorLogging);\n            }\n            throwMultiError(errors);\n          }\n          return concatArrays(resolved);\n        });\n      });\n    }\n  }, {\n    key: \"reorderModules\",\n    value: function reorderModules() {\n      this.modules = stableSort(this.modules, function (m1, m2) {\n        return (m2.priority || 0) - (m1.priority || 0);\n      });\n    }\n  }, {\n    key: \"compile\",\n    value: function compile() {\n      var _this4 = this;\n      this.reorderModules();\n      if (Object.keys(this.compiled).length) {\n        return this;\n      }\n      this.options = this.modules.reduce(function (options, module) {\n        return module.optionsTransformer(options, _this4);\n      }, this.options);\n      this.options.xmlFileNames = uniq(this.options.xmlFileNames);\n      this.xmlDocuments = this.options.xmlFileNames.reduce(function (xmlDocuments, fileName) {\n        var content = _this4.zip.files[fileName].asText();\n        xmlDocuments[fileName] = str2xml(content);\n        return xmlDocuments;\n      }, {});\n      this.setModules({\n        zip: this.zip,\n        xmlDocuments: this.xmlDocuments\n      });\n      this.getTemplatedFiles();\n      // Loop inside all templatedFiles (ie xml files with content).\n      // Sometimes they don't exist (footer.xml for example)\n      this.templatedFiles.forEach(function (fileName) {\n        if (_this4.zip.files[fileName] != null) {\n          _this4.precompileFile(fileName);\n        }\n      });\n      this.templatedFiles.forEach(function (fileName) {\n        if (_this4.zip.files[fileName] != null) {\n          _this4.compileFile(fileName);\n        }\n      });\n      this.setModules({\n        compiled: this.compiled\n      });\n      verifyErrors(this);\n      return this;\n    }\n  }, {\n    key: \"getRelsTypes\",\n    value: function getRelsTypes() {\n      var rootRels = this.zip.files[relsFile];\n      var rootRelsXml = rootRels ? str2xml(rootRels.asText()) : null;\n      var rootRelationships = rootRelsXml ? rootRelsXml.getElementsByTagName(\"Relationship\") : [];\n      var relsTypes = {};\n      for (var i = 0, len = rootRelationships.length; i < len; i++) {\n        var r = rootRelationships[i];\n        relsTypes[r.getAttribute(\"Target\")] = r.getAttribute(\"Type\");\n      }\n      return relsTypes;\n    }\n  }, {\n    key: \"getContentTypes\",\n    value: function getContentTypes() {\n      var contentTypes = this.zip.files[ctXML];\n      var contentTypeXml = contentTypes ? str2xml(contentTypes.asText()) : null;\n      var overrides = contentTypeXml ? contentTypeXml.getElementsByTagName(\"Override\") : null;\n      var defaults = contentTypeXml ? contentTypeXml.getElementsByTagName(\"Default\") : null;\n      return {\n        overrides: overrides,\n        defaults: defaults,\n        contentTypes: contentTypes,\n        contentTypeXml: contentTypeXml\n      };\n    }\n  }, {\n    key: \"updateFileTypeConfig\",\n    value: function updateFileTypeConfig() {\n      var _this5 = this;\n      var fileType;\n      if (this.zip.files.mimetype) {\n        fileType = \"odt\";\n      }\n      this.relsTypes = this.getRelsTypes();\n      var _this$getContentTypes = this.getContentTypes(),\n        overrides = _this$getContentTypes.overrides,\n        defaults = _this$getContentTypes.defaults,\n        contentTypes = _this$getContentTypes.contentTypes,\n        contentTypeXml = _this$getContentTypes.contentTypeXml;\n      if (contentTypeXml) {\n        this.filesContentTypes = collectContentTypes(overrides, defaults, this.zip);\n        this.invertedContentTypes = DocUtils.invertMap(this.filesContentTypes);\n        this.setModules({\n          contentTypes: this.contentTypes,\n          invertedContentTypes: this.invertedContentTypes\n        });\n      }\n      this.modules.forEach(function (module) {\n        fileType = module.getFileType({\n          zip: _this5.zip,\n          contentTypes: contentTypes,\n          contentTypeXml: contentTypeXml,\n          overrides: overrides,\n          defaults: defaults,\n          doc: _this5\n        }) || fileType;\n      });\n      if (fileType === \"odt\") {\n        throwFileTypeNotHandled(fileType);\n      }\n      if (!fileType) {\n        throwFileTypeNotIdentified();\n      }\n      this.fileType = fileType;\n      this.fileTypeConfig = this.options.fileTypeConfig || this.fileTypeConfig || Docxtemplater.FileTypeConfig[this.fileType]();\n      return this;\n    }\n  }, {\n    key: \"renderAsync\",\n    value: function renderAsync(data) {\n      var _this6 = this;\n      return this.resolveData(data).then(function () {\n        return _this6.render();\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render(data) {\n      var _this7 = this;\n      if (this.rendered) {\n        throwRenderTwice();\n      }\n      this.rendered = true;\n      this.compile();\n      if (this.errors.length > 0) {\n        throwRenderInvalidTemplate();\n      }\n      if (data) {\n        this.setData(data);\n      }\n      this.setModules({\n        data: this.data,\n        Lexer: Lexer\n      });\n      this.mapper = this.mapper || this.modules.reduce(function (value, module) {\n        return module.getRenderedMap(value);\n      }, {});\n      Object.keys(this.mapper).forEach(function (to) {\n        var _this7$mapper$to = _this7.mapper[to],\n          from = _this7$mapper$to.from,\n          data = _this7$mapper$to.data;\n        var currentFile = _this7.compiled[from];\n        currentFile.scopeManager = _this7.getScopeManager(to, currentFile, data);\n        currentFile.render(to);\n        _this7.zip.file(to, currentFile.content, {\n          createFolders: true\n        });\n      });\n      verifyErrors(this);\n      this.sendEvent(\"syncing-zip\");\n      this.syncZip();\n      return this;\n    }\n  }, {\n    key: \"syncZip\",\n    value: function syncZip() {\n      var _this8 = this;\n      Object.keys(this.xmlDocuments).forEach(function (fileName) {\n        _this8.zip.remove(fileName);\n        var content = xml2str(_this8.xmlDocuments[fileName]);\n        return _this8.zip.file(fileName, content, {\n          createFolders: true\n        });\n      });\n    }\n  }, {\n    key: \"setData\",\n    value: function setData(data) {\n      this.data = data;\n      return this;\n    }\n  }, {\n    key: \"getZip\",\n    value: function getZip() {\n      return this.zip;\n    }\n  }, {\n    key: \"createTemplateClass\",\n    value: function createTemplateClass(path) {\n      var content = this.zip.files[path].asText();\n      return this.createTemplateClassFromContent(content, path);\n    }\n  }, {\n    key: \"createTemplateClassFromContent\",\n    value: function createTemplateClassFromContent(content, filePath) {\n      var _this9 = this;\n      var xmltOptions = {\n        filePath: filePath,\n        contentType: this.filesContentTypes[filePath],\n        relsType: this.relsTypes[filePath]\n      };\n      Object.keys(defaults).concat([\"filesContentTypes\", \"fileTypeConfig\", \"fileType\", \"modules\"]).forEach(function (key) {\n        xmltOptions[key] = _this9[key];\n      });\n      return new Docxtemplater.XmlTemplater(content, xmltOptions);\n    }\n  }, {\n    key: \"getFullText\",\n    value: function getFullText(path) {\n      return this.createTemplateClass(path || this.fileTypeConfig.textPath(this)).getFullText();\n    }\n  }, {\n    key: \"getTemplatedFiles\",\n    value: function getTemplatedFiles() {\n      var _this10 = this;\n      this.templatedFiles = this.fileTypeConfig.getTemplatedFiles(this.zip);\n      this.targets.forEach(function (target) {\n        _this10.templatedFiles.push(target);\n      });\n      this.templatedFiles = uniq(this.templatedFiles);\n      return this.templatedFiles;\n    }\n  }]);\n  return Docxtemplater;\n}();\nfunction verifyErrors(doc) {\n  var compiled = doc.compiled;\n  doc.errors = concatArrays(Object.keys(compiled).map(function (name) {\n    return compiled[name].allErrors;\n  }));\n  if (doc.errors.length !== 0) {\n    if (doc.options.errorLogging) {\n      logErrors(doc.errors, doc.options.errorLogging);\n    }\n    throwMultiError(doc.errors);\n  }\n}\nDocxtemplater.DocUtils = DocUtils;\nDocxtemplater.Errors = require(\"./errors.js\");\nDocxtemplater.XmlTemplater = require(\"./xml-templater.js\");\nDocxtemplater.FileTypeConfig = require(\"./file-type-config.js\");\nDocxtemplater.XmlMatcher = require(\"./xml-matcher.js\");\nmodule.exports = Docxtemplater;"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}